<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>LTCNM: C:/Users/Shark/Desktop/LINUX_TC_v2.0/LINUX-TC/src/Server/Modules/Management/TC_Server_Management.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LTCNM
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Linux Traffic Control Network Manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_t_c___server___management_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TC_Server_Management.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Source code of the functions for the server management module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="_sockets_8h_source.html">Sockets.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___utils_8h_source.html">TC_Utils.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___config_8h_source.html">TC_Config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___server___d_b_8h_source.html">TC_Server_DB.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___data___types_8h_source.html">TC_Data_Types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___error___types_8h_source.html">TC_Error_Types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___server___management_8h_source.html">TC_Server_Management.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a91cc2e06b924a16d2464430e053f5b67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#a91cc2e06b924a16d2464430e053f5b67">DEBUG_MSG_SERVER_MNG</a>(...)</td></tr>
<tr class="memdesc:a91cc2e06b924a16d2464430e053f5b67"><td class="mdescLeft">&#160;</td><td class="mdescRight">If "ENABLE_DEBUG_SERVER_MANAGEMENT" is defined debug messages related to this module are printed.  <a href="#a91cc2e06b924a16d2464430e053f5b67"></a><br/></td></tr>
<tr class="separator:a91cc2e06b924a16d2464430e053f5b67"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ca45ab8f83445f9f75017f58121bacb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#a6ca45ab8f83445f9f75017f58121bacb">tc_server_management_init</a> (<a class="el" href="_t_c___data___types_8h.html#a16ea33e411c2a3f09f664bd5904f001a">NET_ADDR</a> *server_remote)</td></tr>
<tr class="memdesc:a6ca45ab8f83445f9f75017f58121bacb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the server management module.  <a href="#a6ca45ab8f83445f9f75017f58121bacb"></a><br/></td></tr>
<tr class="separator:a6ca45ab8f83445f9f75017f58121bacb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ffdc30d4d3c9f88b65bb48572d26d10"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#a7ffdc30d4d3c9f88b65bb48572d26d10">tc_server_management_close</a> (void)</td></tr>
<tr class="memdesc:a7ffdc30d4d3c9f88b65bb48572d26d10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the server management module.  <a href="#a7ffdc30d4d3c9f88b65bb48572d26d10"></a><br/></td></tr>
<tr class="separator:a7ffdc30d4d3c9f88b65bb48572d26d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a15c9efcb2a577a275d6c0acfe7628"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#a86a15c9efcb2a577a275d6c0acfe7628">tc_server_management_reserv_req</a> (<a class="el" href="_t_c___server___d_b_8h.html#acf180c20f5762b96c2d44200aeda6eb8">NODE_ENTRY</a> *node, <a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *topic, unsigned char tc_request, unsigned int req_load)</td></tr>
<tr class="memdesc:a86a15c9efcb2a577a275d6c0acfe7628"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a reservation request to a client.  <a href="#a86a15c9efcb2a577a275d6c0acfe7628"></a><br/></td></tr>
<tr class="separator:a86a15c9efcb2a577a275d6c0acfe7628"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec5a9393b9e0690e9febad2f371ece53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#aec5a9393b9e0690e9febad2f371ece53">tc_server_management_rm_topic</a> (<a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *topic)</td></tr>
<tr class="memdesc:aec5a9393b9e0690e9febad2f371ece53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a topic.  <a href="#aec5a9393b9e0690e9febad2f371ece53"></a><br/></td></tr>
<tr class="separator:aec5a9393b9e0690e9febad2f371ece53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5550289ce0ee0cd019813ac660a42a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#ade5550289ce0ee0cd019813ac660a42a">tc_server_management_set_topic</a> (<a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *topic)</td></tr>
<tr class="memdesc:ade5550289ce0ee0cd019813ac660a42a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates topic properties.  <a href="#ade5550289ce0ee0cd019813ac660a42a"></a><br/></td></tr>
<tr class="separator:ade5550289ce0ee0cd019813ac660a42a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a313500cd79fff56359b4e06c7c4ca4d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#a313500cd79fff56359b4e06c7c4ca4d8">tc_server_management_rm_node</a> (<a class="el" href="_t_c___server___d_b_8h.html#acf180c20f5762b96c2d44200aeda6eb8">NODE_ENTRY</a> *node)</td></tr>
<tr class="memdesc:a313500cd79fff56359b4e06c7c4ca4d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a node.  <a href="#a313500cd79fff56359b4e06c7c4ca4d8"></a><br/></td></tr>
<tr class="separator:a313500cd79fff56359b4e06c7c4ca4d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ff8719c7abb9e36967835ce7fc8358a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#a2ff8719c7abb9e36967835ce7fc8358a">tc_server_management_check_bind</a> (<a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *topic)</td></tr>
<tr class="memdesc:a2ff8719c7abb9e36967835ce7fc8358a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for possible topic binds.  <a href="#a2ff8719c7abb9e36967835ce7fc8358a"></a><br/></td></tr>
<tr class="separator:a2ff8719c7abb9e36967835ce7fc8358a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0b4be4e59b0f820492370584683a5f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___management_8c.html#add0b4be4e59b0f820492370584683a5f">tc_server_management_check_unbind</a> (<a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *topic)</td></tr>
<tr class="memdesc:add0b4be4e59b0f820492370584683a5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for possible topic unbinds.  <a href="#add0b4be4e59b0f820492370584683a5f"></a><br/></td></tr>
<tr class="separator:add0b4be4e59b0f820492370584683a5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Source code of the functions for the server management module. </p>
<p>This file contains the implementation of the functions for the server management module. This module is an auxiliary module for the servers admission control module. This module issues the necessary control operations and the necessary requests to the clients for the node removal,topic update and bind/unbind check routines. Internal module</p>
<dl class="section author"><dt>Author</dt><dd>Luis Silva (<a href="#" onclick="location.href='mai'+'lto:'+'lui'+'s.'+'sil'+'va'+'.ua'+'@g'+'mai'+'l.'+'com'; return false;">luis.<span style="display: none;">.nosp@m.</span>silv<span style="display: none;">.nosp@m.</span>a.ua@<span style="display: none;">.nosp@m.</span>gmai<span style="display: none;">.nosp@m.</span>l.com</a>) </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000028">Bug:</a></b></dt><dd>No known bugs </dd></dl>
<dl class="section date"><dt>Date</dt><dd>31/12/2012 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a91cc2e06b924a16d2464430e053f5b67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_MSG_SERVER_MNG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If "ENABLE_DEBUG_SERVER_MANAGEMENT" is defined debug messages related to this module are printed. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a2ff8719c7abb9e36967835ce7fc8358a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_check_bind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for possible topic binds. </p>
<p>Checks in the topic for nodes requesting for a bind. A bind request is then sent to all the nodes that have valid producer/consumer partners. Nodes will then reply back if the bind was a success or a failure. Updates the nodes bind status in the database</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The entry address of the topic to be checked. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000021">Todo:</a></b></dt><dd>Implement the correct procedure when one or more nodes fail the operation (right now only an error code and list with the nodes that failed is generated) </dd></dl>

</div>
</div>
<a class="anchor" id="add0b4be4e59b0f820492370584683a5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_check_unbind </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for possible topic unbinds. </p>
<p>Checks in the topic for nodes that are bound or requesting an unbind. An unbind request is then sent to all the nodes that don't have valid producer/consumer partners. Nodes will then reply back if the unbind was a success or a failure. Updates the nodes bind status in the database</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The entry address of the topic to be checked. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000022">Todo:</a></b></dt><dd>Implement the correct procedure when one or more nodes fail the operation (right now only an error code and list with the nodes that failed is generated) </dd></dl>

</div>
</div>
<a class="anchor" id="a7ffdc30d4d3c9f88b65bb48572d26d10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the server management module. </p>
<p>Closes the module and sockets</p>
<dl class="section pre"><dt>Precondition</dt><dd>None</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a6ca45ab8f83445f9f75017f58121bacb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___data___types_8h.html#a16ea33e411c2a3f09f664bd5904f001a">NET_ADDR</a> *&#160;</td>
          <td class="paramname"><em>server_remote</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the server management module. </p>
<p>Initializes the module and creates the necessary sockets to comunicate with the clients management modules.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">server_remote</td><td>The server configured remote address. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( server_remote ); </dd>
<dd>
assert( server_remote-&gt;name_ip ); </dd>
<dd>
assert( server_remote-&gt;port );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a86a15c9efcb2a577a275d6c0acfe7628"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_reserv_req </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#acf180c20f5762b96c2d44200aeda6eb8">NODE_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>tc_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>req_load</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a reservation request to a client. </p>
<p>Sends a resource reservation request to a clients management module</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">node</td><td>The entry address of the node where the reservation is to be made. Must not be a NULL pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The entry address of the topic associated with the reservation. Must not be a NULL pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tc_request</td><td>The reservation operation type code. Must be one of the defined codes (TC_RESERV/TC_FREE/TC_MODIFY) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">req_load</td><td>The ammount of load to be reserved/freed. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( node ); </dd>
<dd>
assert( topic ); </dd>
<dd>
assert( tc_request == TC_RESERV || tc_request == TC_FREE || tc_request == TC_MODIFY );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a313500cd79fff56359b4e06c7c4ca4d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_rm_node </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#acf180c20f5762b96c2d44200aeda6eb8">NODE_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a node. </p>
<p>Removes a node after deregistration (called from servers admission control module) or upon dead node declaration (called from the servers monitoring module). This call will update all the afected nodes bandwidth (in case the removed node was a producer of some topic). It will also call <a class="el" href="_t_c___server___management_8h.html#add0b4be4e59b0f820492370584683a5f" title="Checks for possible topic unbinds.">tc_server_management_check_unbind( TOPIC_ENTRY *topic )</a> to unbind all the possible nodes that don't have valid consumers/producers anymore and remove the node entry from the database</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">node</td><td>The entry address of the node to be removed. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000020">Todo:</a></b></dt><dd>Implement the correct procedure when one or more nodes fail the operation (right now only an error code and list with the nodes that failed is generated) </dd></dl>

</div>
</div>
<a class="anchor" id="aec5a9393b9e0690e9febad2f371ece53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_rm_topic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a topic. </p>
<p>Sends a request to all the nodes associated with the topic to delete it. Each node will locally unbind and unregister himself from the topic while freeing the associated reservation. Nodes will then reply back if the operation was a success or a failure</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The entry address of the topic associated with the reservation. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000018">Todo:</a></b></dt><dd>Implement the correct procedure when one or more nodes fail the operation (right now only an error code and list with the nodes that failed is generated) </dd></dl>

</div>
</div>
<a class="anchor" id="ade5550289ce0ee0cd019813ac660a42a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_management_set_topic </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_t_c___server___d_b_8h.html#ad2f2dc5c56538bc12f71e6d9dcbd862e">TOPIC_ENTRY</a> *&#160;</td>
          <td class="paramname"><em>topic</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates topic properties. </p>
<p>Sends a request to all the nodes associated with the topic to update it with new properties. Each node will locally update the associated reservation and topic entry. Nodes will then reply back if the operation was a success or a failure</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic</td><td>The entry address of the topic associated with the reservation. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000019">Todo:</a></b></dt><dd>Implement the correct procedure when one or more nodes fail the operation (right now only an error code and list with the nodes that failed is generated) </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e2f1d50623fd5245cc4ce34c1387de82.html">LINUX-TC</a></li><li class="navelem"><a class="el" href="dir_56781fee94a304a1586e3f3840a99b09.html">src</a></li><li class="navelem"><a class="el" href="dir_962d17f1714b93ab4490950c0682cc14.html">Server</a></li><li class="navelem"><a class="el" href="dir_b9aff972842a143e63562f0afb97319e.html">Modules</a></li><li class="navelem"><a class="el" href="dir_8523330111fe756b77955d7e59764875.html">Management</a></li><li class="navelem"><a class="el" href="_t_c___server___management_8c.html">TC_Server_Management.c</a></li>
    <li class="footer">Generated on Thu Jan 3 2013 19:01:17 for LTCNM by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3 </li>
  </ul>
</div>
</body>
</html>
