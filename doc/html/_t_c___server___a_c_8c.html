<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>LTCNM: C:/Users/Shark/Desktop/LINUX_TC_v2.0/LINUX-TC/src/Server/Modules/Admission_Control/TC_Server_AC.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LTCNM
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">Linux Traffic Control Network Manager</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_t_c___server___a_c_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">TC_Server_AC.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Source code of the functions for the server admission control module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;assert.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___data___types_8h_source.html">TC_Data_Types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___error___types_8h_source.html">TC_Error_Types.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___config_8h_source.html">TC_Config.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___server___a_c_8h_source.html">TC_Server_AC.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___server___d_b_8h_source.html">TC_Server_DB.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___server___management_8h_source.html">TC_Server_Management.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_c___server___notifications_8h_source.html">TC_Server_Notifications.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4bd6a17572a423052da68eab143b33a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a4bd6a17572a423052da68eab143b33a2">DEBUG_MSG_SERVER_AC</a>(...)</td></tr>
<tr class="memdesc:a4bd6a17572a423052da68eab143b33a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">If "ENABLE_DEBUG_SERVER_AC" is defined debug messages related to this module are printed.  <a href="#a4bd6a17572a423052da68eab143b33a2"></a><br/></td></tr>
<tr class="separator:a4bd6a17572a423052da68eab143b33a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7426344b4529f6924d8f4372e87c170c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a7426344b4529f6924d8f4372e87c170c">tc_server_ac_init</a> (void)</td></tr>
<tr class="memdesc:a7426344b4529f6924d8f4372e87c170c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the server admission control module.  <a href="#a7426344b4529f6924d8f4372e87c170c"></a><br/></td></tr>
<tr class="separator:a7426344b4529f6924d8f4372e87c170c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bef8318d0ff68ef5072322c1b947d95"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a7bef8318d0ff68ef5072322c1b947d95">tc_server_ac_close</a> (void)</td></tr>
<tr class="memdesc:a7bef8318d0ff68ef5072322c1b947d95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes the server admission control module.  <a href="#a7bef8318d0ff68ef5072322c1b947d95"></a><br/></td></tr>
<tr class="separator:a7bef8318d0ff68ef5072322c1b947d95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4e591520d48a9f6e4c245285af29b23"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#ac4e591520d48a9f6e4c245285af29b23">tc_server_ac_add_node</a> (unsigned int node_id, <a class="el" href="_t_c___data___types_8h.html#a16ea33e411c2a3f09f664bd5904f001a">NET_ADDR</a> *node_address, unsigned int *ret_node_id)</td></tr>
<tr class="memdesc:ac4e591520d48a9f6e4c245285af29b23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a node in the network.  <a href="#ac4e591520d48a9f6e4c245285af29b23"></a><br/></td></tr>
<tr class="separator:ac4e591520d48a9f6e4c245285af29b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c6f7dcba34feff2e29becfbf4e437ed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a1c6f7dcba34feff2e29becfbf4e437ed">tc_server_ac_rm_node</a> (unsigned int node_id)</td></tr>
<tr class="memdesc:a1c6f7dcba34feff2e29becfbf4e437ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a node from the network.  <a href="#a1c6f7dcba34feff2e29becfbf4e437ed"></a><br/></td></tr>
<tr class="separator:a1c6f7dcba34feff2e29becfbf4e437ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af22fb099a52b93b57e01ba629fc39504"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#af22fb099a52b93b57e01ba629fc39504">tc_server_ac_add_topic</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int <a class="el" href="_t_c___utils_8c.html#a265b5bfdd913dbb5b490b642f7dbee27">channel_size</a>, unsigned int <a class="el" href="_t_c___utils_8c.html#ab988f55b7558dc04ec769aa403c16350">channel_period</a>)</td></tr>
<tr class="memdesc:af22fb099a52b93b57e01ba629fc39504"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a new topic in the network.  <a href="#af22fb099a52b93b57e01ba629fc39504"></a><br/></td></tr>
<tr class="separator:af22fb099a52b93b57e01ba629fc39504"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b07859f3df4189b0e14dddde758f083"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a0b07859f3df4189b0e14dddde758f083">tc_server_ac_set_topic_prop</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int <a class="el" href="_t_c___utils_8c.html#a265b5bfdd913dbb5b490b642f7dbee27">channel_size</a>, unsigned int <a class="el" href="_t_c___utils_8c.html#ab988f55b7558dc04ec769aa403c16350">channel_period</a>)</td></tr>
<tr class="memdesc:a0b07859f3df4189b0e14dddde758f083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the topic properties.  <a href="#a0b07859f3df4189b0e14dddde758f083"></a><br/></td></tr>
<tr class="separator:a0b07859f3df4189b0e14dddde758f083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab793bb919432b8c1d25fce889da87f05"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#ab793bb919432b8c1d25fce889da87f05">tc_server_ac_rm_topic</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>)</td></tr>
<tr class="memdesc:ab793bb919432b8c1d25fce889da87f05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes a topic from the network.  <a href="#ab793bb919432b8c1d25fce889da87f05"></a><br/></td></tr>
<tr class="separator:ab793bb919432b8c1d25fce889da87f05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98bc323049256a7fbfe12942b6e6c041"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a98bc323049256a7fbfe12942b6e6c041">tc_server_ac_get_topic_prop</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int *ret_load, unsigned int *ret_size, unsigned int *ret_period, <a class="el" href="_t_c___data___types_8h.html#a16ea33e411c2a3f09f664bd5904f001a">NET_ADDR</a> *ret_topic_addr)</td></tr>
<tr class="memdesc:a98bc323049256a7fbfe12942b6e6c041"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the topic properties.  <a href="#a98bc323049256a7fbfe12942b6e6c041"></a><br/></td></tr>
<tr class="separator:a98bc323049256a7fbfe12942b6e6c041"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0947b20bbff2aa94bfeb547bd2061838"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a0947b20bbff2aa94bfeb547bd2061838">tc_server_ac_add_prod</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:a0947b20bbff2aa94bfeb547bd2061838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a node as a topic producer.  <a href="#a0947b20bbff2aa94bfeb547bd2061838"></a><br/></td></tr>
<tr class="separator:a0947b20bbff2aa94bfeb547bd2061838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab26baa2caf50b899c560180db4fd53b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#ab26baa2caf50b899c560180db4fd53b2">tc_server_ac_rm_prod</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:ab26baa2caf50b899c560180db4fd53b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregisters a node as a topic producer.  <a href="#ab26baa2caf50b899c560180db4fd53b2"></a><br/></td></tr>
<tr class="separator:ab26baa2caf50b899c560180db4fd53b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37106c7012120d6873439e7b54ab058b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a37106c7012120d6873439e7b54ab058b">tc_server_ac_add_cons</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:a37106c7012120d6873439e7b54ab058b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers a node as a topic consumer.  <a href="#a37106c7012120d6873439e7b54ab058b"></a><br/></td></tr>
<tr class="separator:a37106c7012120d6873439e7b54ab058b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3750daeb8d52f9328fa7483d06c22e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#abb3750daeb8d52f9328fa7483d06c22e">tc_server_ac_rm_cons</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:abb3750daeb8d52f9328fa7483d06c22e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregisters a node as a topic consumer.  <a href="#abb3750daeb8d52f9328fa7483d06c22e"></a><br/></td></tr>
<tr class="separator:abb3750daeb8d52f9328fa7483d06c22e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bb795e3bea078aae45c388b5fc59b03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a2bb795e3bea078aae45c388b5fc59b03">tc_server_ac_bind_tx</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:a2bb795e3bea078aae45c388b5fc59b03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binds a node as a topic producer.  <a href="#a2bb795e3bea078aae45c388b5fc59b03"></a><br/></td></tr>
<tr class="separator:a2bb795e3bea078aae45c388b5fc59b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36fa6a00d6354894db0852179c13a0fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a36fa6a00d6354894db0852179c13a0fc">tc_server_ac_unbind_tx</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:a36fa6a00d6354894db0852179c13a0fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unbinds a node as a topic producer.  <a href="#a36fa6a00d6354894db0852179c13a0fc"></a><br/></td></tr>
<tr class="separator:a36fa6a00d6354894db0852179c13a0fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51f498ad7c0b5f9e5960e66822c9a4ac"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a51f498ad7c0b5f9e5960e66822c9a4ac">tc_server_ac_bind_rx</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:a51f498ad7c0b5f9e5960e66822c9a4ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Binds a node as a topic consumer.  <a href="#a51f498ad7c0b5f9e5960e66822c9a4ac"></a><br/></td></tr>
<tr class="separator:a51f498ad7c0b5f9e5960e66822c9a4ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d7468cb5329ba693e3edb5271e12d5e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a5d7468cb5329ba693e3edb5271e12d5e">tc_server_ac_unbind_rx</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>, unsigned int node_id)</td></tr>
<tr class="memdesc:a5d7468cb5329ba693e3edb5271e12d5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unbinds a node as a topic consumer.  <a href="#a5d7468cb5329ba693e3edb5271e12d5e"></a><br/></td></tr>
<tr class="separator:a5d7468cb5329ba693e3edb5271e12d5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f6e0d525e1d79d0b2bc8ea6634db074"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a6f6e0d525e1d79d0b2bc8ea6634db074">tc_server_ac_check_topic_bind</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>)</td></tr>
<tr class="memdesc:a6f6e0d525e1d79d0b2bc8ea6634db074"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for nodes with pending bind requests.  <a href="#a6f6e0d525e1d79d0b2bc8ea6634db074"></a><br/></td></tr>
<tr class="separator:a6f6e0d525e1d79d0b2bc8ea6634db074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1faec35a788764a8474c3f56fcae254b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_t_c___server___a_c_8c.html#a1faec35a788764a8474c3f56fcae254b">tc_server_ac_check_topic_unbind</a> (unsigned int <a class="el" href="_t_c___utils_8c.html#a01f97495510d1862834a5a7ab436bc38">topic_id</a>)</td></tr>
<tr class="memdesc:a1faec35a788764a8474c3f56fcae254b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for nodes with pending unbind requests.  <a href="#a1faec35a788764a8474c3f56fcae254b"></a><br/></td></tr>
<tr class="separator:a1faec35a788764a8474c3f56fcae254b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Source code of the functions for the server admission control module. </p>
<p>This file contains the implementation of the functions for the server admission control module. This module receives the requests from the client and accepts or refuses them. Uses other internal modules to carry out the necessary operations in order to fulfill the accepted requests. Internal module</p>
<dl class="section author"><dt>Author</dt><dd>Luis Silva (<a href="#" onclick="location.href='mai'+'lto:'+'lui'+'s.'+'sil'+'va'+'.ua'+'@g'+'mai'+'l.'+'com'; return false;">luis.<span style="display: none;">.nosp@m.</span>silv<span style="display: none;">.nosp@m.</span>a.ua@<span style="display: none;">.nosp@m.</span>gmai<span style="display: none;">.nosp@m.</span>l.com</a>) </dd></dl>
<dl class="bug"><dt><b><a class="el" href="bug.html#_bug000020">Bug:</a></b></dt><dd>No known bugs </dd></dl>
<dl class="section date"><dt>Date</dt><dd>31/12/2012 </dd></dl>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a4bd6a17572a423052da68eab143b33a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEBUG_MSG_SERVER_AC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If "ENABLE_DEBUG_SERVER_AC" is defined debug messages related to this module are printed. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a37106c7012120d6873439e7b54ab058b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_add_cons </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a node as a topic consumer. </p>
<p>Registers a node as a topic consumer. If the node or topic is not registered in the database the request is refused. Checks if all the nodes have enough bandwidth for a new consumer. If they have enough bandwidth the node entry is added to the topics consumer list and the bandwidth of all nodes updated</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Since we use multicast only the requesting node bandwidth will be affected and no new reservations are made </dd></dl>

</div>
</div>
<a class="anchor" id="ac4e591520d48a9f6e4c245285af29b23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_add_node </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_c___data___types_8h.html#a16ea33e411c2a3f09f664bd5904f001a">NET_ADDR</a> *&#160;</td>
          <td class="paramname"><em>node_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>ret_node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a node in the network. </p>
<p>Checks if node is already registered. If not creates a new entry in the database and assigns an ID for the node</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID requested by the node to be registered with. If 0 server assigns a random ID. Must be equal or greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_address</td><td>The nodes network address (clients top module socket address). Must not be a NULL pointer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ret_node_id</td><td>The assigned ID to the node. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( node_address ); </dd>
<dd>
assert( ret_node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000014">Todo:</a></b></dt><dd>In this version it is only supported the registration of one local client. Redo the function so it is possible to register more than one (don't forget about the traffic control reservations!!) </dd></dl>

</div>
</div>
<a class="anchor" id="a0947b20bbff2aa94bfeb547bd2061838"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_add_prod </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a node as a topic producer. </p>
<p>Registers a node as a topic producer. If the node or topic is not registered in the database the request is refused. Checks if all the nodes have enough bandwidth for a new producer. If they have enough bandwidth the management module is called to request a reservation in the producer. After the reservation is made the bandwidth of all nodes is updated and the node entry is added to the topics producer list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="af22fb099a52b93b57e01ba629fc39504"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_add_topic </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>channel_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>channel_period</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers a new topic in the network. </p>
<p>Checks if topic is already registered. If it is already registered but with different properties the request is refused otherwise it is accepted. If it is not registered a new entry is created and a network address is assigned to the topic</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID requested by the node to be registered with. If 0 server assigns a random ID. Must be equal or greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel_size</td><td>The nodes network address (clients top module socket address). Must not be a NULL pointer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel_period</td><td>The assigned ID to the node. Must not be a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( channel_size ); </dd>
<dd>
assert( channel_period );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000015">Todo:</a></b></dt><dd>In this version it is supported a high but limited number of addresses for the topics. Find a better way to generate addresses or an address pool for store and reuse of the freed addresses </dd></dl>

</div>
</div>
<a class="anchor" id="a51f498ad7c0b5f9e5960e66822c9a4ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_bind_rx </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Binds a node as a topic consumer. </p>
<p>Binds a node as a topic consumer. If the node or topic is not registered in the database the request is refused. The nodes bind status entry is updated signaling that the node is requesting a bind</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server top module will call <a class="el" href="_t_c___server___a_c_8h.html#a6f6e0d525e1d79d0b2bc8ea6634db074" title="Checks for nodes with pending bind requests.">tc_server_ac_check_topic_bind( unsigned int topic_id )</a> after this request has been resolved </dd></dl>

</div>
</div>
<a class="anchor" id="a2bb795e3bea078aae45c388b5fc59b03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_bind_tx </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Binds a node as a topic producer. </p>
<p>Binds a node as a topic producer. If the node or topic is not registered in the database the request is refused. The nodes bind status entry is updated signaling that the node is requesting a bind</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server top module will call <a class="el" href="_t_c___server___a_c_8h.html#a6f6e0d525e1d79d0b2bc8ea6634db074" title="Checks for nodes with pending bind requests.">tc_server_ac_check_topic_bind( unsigned int topic_id )</a> after this request has been resolved </dd></dl>

</div>
</div>
<a class="anchor" id="a6f6e0d525e1d79d0b2bc8ea6634db074"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_check_topic_bind </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for nodes with pending bind requests. </p>
<p>Calls the management module to check for nodes with pending bind requests and to bind all that have a valid producer/consumer partner</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a1faec35a788764a8474c3f56fcae254b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_check_topic_unbind </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for nodes with pending unbind requests. </p>
<p>Calls the management module to check for nodes with pending unbind requests and to unbind all that does not have a valid producer/consumer partner or is requesting an unbind</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a7bef8318d0ff68ef5072322c1b947d95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_close </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes the server admission control module. </p>
<p>Closes the module</p>
<dl class="section pre"><dt>Precondition</dt><dd>Node</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a98bc323049256a7fbfe12942b6e6c041"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_get_topic_prop </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>ret_load</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>ret_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>ret_period</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_t_c___data___types_8h.html#a16ea33e411c2a3f09f664bd5904f001a">NET_ADDR</a> *&#160;</td>
          <td class="paramname"><em>ret_topic_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the topic properties. </p>
<p>Searches for the topic entry and gets its properties. If topic is not found the request is refused</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ret_load</td><td>The buffer to store the topics load (in bps). Optional (can be a NULL pointer) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ret_size</td><td>The buffer to store the maximum size (in bytes) of the topic messages. Optional (can be a NULL pointer) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ret_period</td><td>The buffer to store the minimum time interval (in ms) between consecutive messages. Optional (can be a NULL pointer) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">ret_topic_addr</td><td>The buffer to store the topics network address. Optional (can be a NULL pointer)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a7426344b4529f6924d8f4372e87c170c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts the server admission control module. </p>
<p>Initializes the module</p>
<dl class="section pre"><dt>Precondition</dt><dd>Node</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="abb3750daeb8d52f9328fa7483d06c22e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_rm_cons </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregisters a node as a topic consumer. </p>
<p>Unregisters a node as a topic consumer. If the node or topic is not registered in the database the request is refused. The node is removed from the topics consumer list and the bandwidth of all nodes is updated</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server top module will call <a class="el" href="_t_c___server___a_c_8h.html#a1faec35a788764a8474c3f56fcae254b" title="Checks for nodes with pending unbind requests.">tc_server_ac_check_topic_unbind( unsigned int topic_id )</a> after this request has been resolved </dd></dl>

</div>
</div>
<a class="anchor" id="a1c6f7dcba34feff2e29becfbf4e437ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_rm_node </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a node from the network. </p>
<p>Check if node is registered. If it is the management module function <a class="el" href="_t_c___server___management_8h.html#a313500cd79fff56359b4e06c7c4ca4d8" title="Removes a node.">tc_server_management_rm_node( NODE_ENTRY *node )</a> is called to remove the node</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node to remove. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="ab26baa2caf50b899c560180db4fd53b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_rm_prod </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregisters a node as a topic producer. </p>
<p>Unregisters a node as a topic producer. If the node or topic is not registered in the database the request is refused. The management module is called to free the reservation in the producer. After the reservation is freed the bandwidth of all nodes is updated and the node entry removed from the topic producers list</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server top module will call <a class="el" href="_t_c___server___a_c_8h.html#a1faec35a788764a8474c3f56fcae254b" title="Checks for nodes with pending unbind requests.">tc_server_ac_check_topic_unbind( unsigned int topic_id )</a> after this request has been resolved </dd></dl>

</div>
</div>
<a class="anchor" id="ab793bb919432b8c1d25fce889da87f05"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_rm_topic </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes a topic from the network. </p>
<p>Checks if topic is registered. If it is the management module function <a class="el" href="_t_c___server___management_8h.html#aec5a9393b9e0690e9febad2f371ece53" title="Removes a topic.">tc_server_management_rm_topic( TOPIC_ENTRY *topic )</a> is called to remove the topic from all the nodes. Updates nodes bandwidth after topic removal</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic to remove. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a0b07859f3df4189b0e14dddde758f083"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_set_topic_prop </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>channel_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>channel_period</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the topic properties. </p>
<p>Calculates the new load of the topic after the requested changes and checks if every node has enough bandwidth. If they have it calls the management module to update the reservations and databases of all the nodes otherwise the request is refused</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic to update. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel_size</td><td>The new maximum size (in bytes) for the topic messages. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">channel_period</td><td>The minimum time interval (in ms) between consecutive topic messages. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( channel_size ); </dd>
<dd>
assert( channel_period );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0) </dd></dl>

</div>
</div>
<a class="anchor" id="a5d7468cb5329ba693e3edb5271e12d5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_unbind_rx </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unbinds a node as a topic consumer. </p>
<p>Unbinds a node as a topic consumer. If the node or topic is not registered in the database the request is refused. The nodes bind status entry is updated signaling that the node is requesting an unbind</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server top module will call <a class="el" href="_t_c___server___a_c_8h.html#a1faec35a788764a8474c3f56fcae254b" title="Checks for nodes with pending unbind requests.">tc_server_ac_check_topic_unbind( unsigned int topic_id )</a> after this request has been resolved </dd></dl>

</div>
</div>
<a class="anchor" id="a36fa6a00d6354894db0852179c13a0fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tc_server_ac_unbind_tx </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>topic_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>node_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unbinds a node as a topic producer. </p>
<p>Unbinds a node as a topic producer. If the node or topic is not registered in the database the request is refused. The nodes bind status entry is updated signaling that the node is requesting an unbind</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">topic_id</td><td>The ID of the topic. Must be greater than 0 </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node_id</td><td>The ID of the node. Must be greater than 0</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>assert( topic_id ); </dd>
<dd>
assert( node_id );</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Upon successful return : ERR_OK (0) </dd>
<dd>
Upon output error : An error code (&lt;0)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The server top module will call <a class="el" href="_t_c___server___a_c_8h.html#a1faec35a788764a8474c3f56fcae254b" title="Checks for nodes with pending unbind requests.">tc_server_ac_check_topic_unbind( unsigned int topic_id )</a> after this request has been resolved </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_e2f1d50623fd5245cc4ce34c1387de82.html">LINUX-TC</a></li><li class="navelem"><a class="el" href="dir_56781fee94a304a1586e3f3840a99b09.html">src</a></li><li class="navelem"><a class="el" href="dir_962d17f1714b93ab4490950c0682cc14.html">Server</a></li><li class="navelem"><a class="el" href="dir_b9aff972842a143e63562f0afb97319e.html">Modules</a></li><li class="navelem"><a class="el" href="dir_0ce5f40ed6488d28947dcd95c4b9a914.html">Admission_Control</a></li><li class="navelem"><a class="el" href="_t_c___server___a_c_8c.html">TC_Server_AC.c</a></li>
    <li class="footer">Generated on Thu Jan 3 2013 19:01:17 for LTCNM by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3 </li>
  </ul>
</div>
</body>
</html>
